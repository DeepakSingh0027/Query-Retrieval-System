import fs from "fs";
import Pdf from "./lib/pdf-parse.js"; // Make sure this file is also ES module-compatible

export default Pdf;

// For testing purpose
if (import.meta.url === `file://${process.argv[1]}`) {
  const PDF_FILE = "./test/data/05-versions-space.pdf";

  try {
    const dataBuffer = fs.readFileSync(PDF_FILE);
    Pdf(dataBuffer).then((data) => {
      fs.writeFileSync(`${PDF_FILE}.txt`, data.text, {
        encoding: "utf8",
        flag: "w",
      });
      debugger;
    }).catch((err) => {
      console.error("Error during PDF parsing:", err);
      debugger;
    });
  } catch (err) {
    console.error("File not found or can't be read:", err.message);
  }
}
